-- ================ CRIAÇÃO DA TABELA UNIDADES ================
CREATE TABLE IF NOT EXISTS `unidades` (
  `id_unidade` int NOT NULL AUTO_INCREMENT,
  `nome` varchar(100) COLLATE utf8mb4_general_ci NOT NULL,
  `responsavel` varchar(100) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `cnpj` varchar(18) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `cpf` varchar(14) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `telefone` varchar(20) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `email` varchar(100) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `cep` varchar(10) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `endereco` varchar(150) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `numero` varchar(10) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `bairro` varchar(80) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `cidade` varchar(80) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `estado` varchar(50) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `complemento` varchar(100) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `horario_funcionamento` varchar(100) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `horario_abertura` time DEFAULT NULL,
  `horario_fechamento` time DEFAULT NULL,
  `latitude` decimal(10,8) DEFAULT NULL,
  `longitude` decimal(11,8) DEFAULT NULL,
  `data_cadastro` datetime DEFAULT CURRENT_TIMESTAMP,
  `ativo` tinyint(1) DEFAULT '1',
  `status_pagamento` enum('pago','atrasado','bloqueado') COLLATE utf8mb4_general_ci DEFAULT 'bloqueado',
  `status_avaliacao` enum('aprovado','aguardando','negado') COLLATE utf8mb4_general_ci DEFAULT 'aguardando',
  PRIMARY KEY (`id_unidade`),
  UNIQUE KEY `nome_unique` (`nome`),
  UNIQUE KEY `cnpj_unique` (`cnpj`),
  UNIQUE KEY `cpf_unique` (`cpf`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- ================ INSERÇÃO DE DADOS DE TESTE ================
INSERT IGNORE INTO unidades (
  nome, responsavel, cnpj, telefone, email, cep, endereco, numero, 
  bairro, cidade, estado, complemento, horario_funcionamento,
  horario_abertura, horario_fechamento, latitude, longitude, ativo, status_pagamento, status_avaliacao
) VALUES
(
  'Barbearia Centro - Matriz',
  'João Silva Santos',
  '12.345.678/0001-90',
  '(11) 3333-4444',
  'matriz@barbeariacentro.com',
  '01310-100',
  'Avenida Paulista',
  '1578',
  'Bela Vista',
  'São Paulo',
  'SP',
  'Loja 1',
  'Segunda a Sexta: 8h às 19h, Sábado: 8h às 17h',
  '08:00:00',
  '19:00:00',
  -23.5613860,
  -46.6565840,
  1,
  'pago',
  'aprovado'
),
(
  'Barbearia Centro - Filial Vila Madalena',
  'Maria Oliveira Costa',
  '12.345.678/0002-71',
  '(11) 2222-3333',
  'vilamadalena@barbeariacentro.com',
  '05433-000',
  'Rua Harmonia',
  '123',
  'Vila Madalena',
  'São Paulo',
  'SP',
  NULL,
  'Segunda a Sábado: 9h às 20h',
  '09:00:00',
  '20:00:00',
  -23.5464920,
  -46.6908130,
  1,
  'pago',
  'aprovado'
),
(
  'Barbearia Centro - Filial Moema',
  'Carlos Eduardo Lima',
  '12.345.678/0003-52',
  '(11) 4444-5555',
  'moema@barbeariacentro.com',
  '04038-001',
  'Avenida Ibirapuera',
  '2927',
  'Moema',
  'São Paulo',
  'SP',
  'Conjunto 45',
  'Segunda a Sexta: 8h às 18h, Sábado: 8h às 16h',
  '08:00:00',
  '18:00:00',
  -23.5935400,
  -46.6581050,
  0,
  'atrasado',
  'aguardando'
),
(
  'Studio Hair & Beauty - ABC',
  'Ana Paula Rodrigues',
  NULL,
  '(11) 5555-6666',
  'contato@studiohairabv.com',
  '09060-650',
  'Rua das Flores',
  '456',
  'Centro',
  'Santo André',
  'SP',
  'Sala 2',
  'Terça a Sábado: 9h às 19h',
  '09:00:00',
  '19:00:00',
  -23.6548290,
  -46.5342760,
  0,
  'pago',
  'aprovado'
),
(
  'Barbearia Tradicional - Liberdade',
  'Pedro Takeshi Yamamoto',
  '23.456.789/0001-12',
  '(11) 6666-7777',
  'liberdade@barbeariatradicional.com',
  '01503-001',
  'Rua da Liberdade',
  '789',
  'Liberdade',
  'São Paulo',
  'SP',
  NULL,
  'Segunda a Domingo: 8h às 20h',
  '08:00:00',
  '20:00:00',
  -23.5582640,
  -46.6344960,
  0,
  'atrasado',
  'aguardando'
),
(
  'Salão Elegante - Ipiranga',
  'Luciana Fernandes Silva',
  '34.567.890/0001-23',
  '(11) 7777-8888',
  'ipiranga@salaoelegante.com',
  '04261-000',
  'Avenida do Cursino',
  '1011',
  'Vila da Saúde',
  'São Paulo',
  'SP',
  'Loja A',
  'Segunda a Sexta: 9h às 18h, Sábado: 9h às 15h',
  '09:00:00',
  '18:00:00',
  -23.6152830,
  -46.6411220,
  0,
  'bloqueado',
  'negado'
),
(
  'Barbershop Modern - Pinheiros',
  'Roberto Carlos Mendes',
  '45.678.901/0001-34',
  '(11) 8888-9999',
  'pinheiros@barbershopmodern.com',
  '05422-001',
  'Rua dos Pinheiros',
  '1212',
  'Pinheiros',
  'São Paulo',
  'SP',
  'Térreo',
  'Todos os dias: 10h às 22h',
  '10:00:00',
  '22:00:00',
  -23.5633570,
  -46.6971440,
  0,
  'pago',
  'aprovado'
);

-- ================ VERIFICAÇÃO ================
SELECT 'Tabela unidades criada e populada com sucesso!' as status;
SELECT COUNT(*) as total_unidades FROM unidades;
SELECT estado, COUNT(*) as quantidade FROM unidades GROUP BY estado;
SELECT ativo, COUNT(*) as quantidade FROM unidades GROUP BY ativo;